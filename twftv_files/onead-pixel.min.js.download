/*! onead-pixel 2023-09-20 4:45:35 PM */

var onead_pixel=onead_pixel||[],ONEAD_PIXEL_API={host:"https://onead.onevision.com.tw/",work_session_time:18e5,debug:!(window.ONEAD_etag_cscb=function(e){for(var t=0;t<ONEAD_PIXEL_ISIP.cscb_ary.length;t++)ONEAD_PIXEL_ISIP.cscb_ary.shift()(e)})},ONEAD_PIXEL_CONST={target:"v2/push?",serv:"v2/et/oid?cb=window.ONEAD_etag_cscb",event_type_normal:"7000",action_click:"cli",action_touch:"tou",action_scroll:"scr",action_conversion:"con",action_enter:"ent",action_stay_10s:"10s"},ONEAD_CONVERSION={page_view:"PageView",view_content:"ViewContent",contact:"Contact",complete_registration:"CompleteRegistration",find_location:"FindLocation",submit_application:"SubmitApplication",lead:"Lead",subscribe:"Subscribe",search:"Search",start_trial:"StartTrial",purchase:"Purchase",initate_checkout:"InitiateCheckout",customiz_product:"CustomizeProduct",add_to_wish_list:"AddToWishlist",add_to_cart:"AddToCart",donate:"Donate",schedule:"Schedule"},ONEAD_PIXEL_ISIP=window.ONEAD_PIXEL_ISIP||{cscb_ary:[],oid:"",guid:"",guid_1st:""},ONEAD_1ST_COOKIE=window.ONEAD_1ST_COOKIE||{vision:"20201118",disable:!1},ONEAD_ENG=window.ONEAD_ENG||[],onead_pixel_core=onead_pixel_core||{};onead_pixel_core.init_v1=function(e){ONEAD_PIXEL_API.host=e.host||ONEAD_PIXEL_API.host,this.pub={params:{}},this.pub.params.sessionid=e.sessionid,this.pub.params.accountid=e.accountid,this.pub.params.vendor=e.vendor,this.pub.params.adid=e.adid,this.pub.params.uid=e.uid,this.pub.params.guid="",this.pub.params.cat=e.category||"-1",this.pub.params.ffp="",this.pub.params.cu1=e.custom1||"",this.pub.params.cu2=e.custom2||"",this.pub.params.cu3=e.custom3||"",this.pub.params.cu4=e.custom4||"",this.pub.params.type="",this.pub.params.enc="",this.action="";var t=ONEAD_PIXEL_UTIL.getLocationParams();t&&(this.pub.params.utm_source=t.utm_source,this.pub.params.utm_medium=t.utm_medium,this.pub.params.utm_campaign=t.utm_campaign,this.pub.params.utm_term=t.utm_term,this.pub.params.utm_content=t.utm_content),e.disable_1stCookie&&(ONEAD_1ST_COOKIE.disable=e.disable_1stCookie);e=ONEAD_PIXEL_UTIL.getSSId();this.pub.params.ssid=e;this.get_serv()},onead_pixel_core.init_v2=function(e){ONEAD_PIXEL_API.host=e.host||ONEAD_PIXEL_API.host,this.pub={params:{}},this.pub.params.sessionid=e.sessionid,this.pub.params.accountid=e.accountid,this.pub.params.vendor=e.vendor,this.pub.params.adid=e.adid,this.pub.params.uid=e.uid,this.pub.params.guid="",this.pub.params.cat=e.category||"-1",this.pub.params.ffp="",this.pub.params.cu1=e.custom1||"",this.pub.params.cu2=e.custom2||"",this.pub.params.cu3=e.custom3||"",this.pub.params.cu4=e.custom4||"",this.pub.params.type="",this.pub.params.enc="",this.action="",this.is_bounce_check=!0;var t=ONEAD_PIXEL_UTIL.getLocationParams();t&&(this.pub.params.utm_source=t.utm_source,this.pub.params.utm_medium=t.utm_medium,this.pub.params.utm_campaign=t.utm_campaign,this.pub.params.utm_term=t.utm_term,this.pub.params.utm_content=t.utm_content),e.disable_1stCookie&&(ONEAD_1ST_COOKIE.disable=e.disable_1stCookie),onead_pixel_core.check_bonuce(),onead_pixel_core.check_10s_event();e=ONEAD_PIXEL_UTIL.getSSId();this.pub.params.ssid=e},onead_pixel_core.check_10s_event=function(){setTimeout(()=>{var e={};e.type=ONEAD_PIXEL_CONST.action_stay_10s,ONEAD_ENG.push(e),onead_pixel_core.get_serv()},1e4)},onead_pixel_core.oid_call=function(e){var t,a;this.onead_pixel_core.pub.params.enc=e.enc,ONEAD_1ST_COOKIE.disable?this.onead_pixel_core.pub.params.guid=e.guid:(t={oid:e.guid,_oldoid:e.oid,ts:e.ts||(new Date).getTime()},(!(a=ONEAD_PIXEL_UTIL.get_cookie("oid"))||0<t.ts&&t.ts<a.ts)&&ONEAD_PIXEL_UTIL.set_cookie("oid",t),0===e.dnt&&a?(this.onead_pixel_core.pub.params.guid=a.oid,ONEAD_PIXEL_ISIP.guid_1st=a.oid):this.onead_pixel_core.pub.params.guid=e.guid),t&&(ONEAD_PIXEL_ISIP.oid=t._oldoid,ONEAD_PIXEL_ISIP.guid=t.oid),onead_pixel_core.check_action(),"www.onead.com.tw"!==window.location.host&&"localhost:4000"!==window.location.host||onead_pixel_core.send_GA()},onead_pixel_core.check_action=function(){var e=ONEAD_ENG?ONEAD_ENG.shift():[];if(e&&e.type)switch(e.type){case"tracker":"PageView"===e.value.name?onead_pixel_core.send(ONEAD_PIXEL_CONST.action_enter,JSON.stringify(e.value)):onead_pixel_core.send(ONEAD_PIXEL_CONST.action_conversion,JSON.stringify(e.value));break;case ONEAD_PIXEL_CONST.action_click:onead_pixel_core.send(ONEAD_PIXEL_CONST.action_click);break;case ONEAD_PIXEL_CONST.action_touch:onead_pixel_core.send(ONEAD_PIXEL_CONST.action_touch);break;case ONEAD_PIXEL_CONST.action_scroll:onead_pixel_core.send(ONEAD_PIXEL_CONST.action_scroll);break;case ONEAD_PIXEL_CONST.action_stay_10s:onead_pixel_core.send(ONEAD_PIXEL_CONST.action_stay_10s);break;default:onead_pixel_core.send()}else onead_pixel_core.send()},onead_pixel_core.get_serv=function(){ONEAD_PIXEL_ISIP.cscb_ary.push(this.oid_call);var e=ONEAD_PIXEL_API.host+ONEAD_PIXEL_CONST.serv;ONEAD_PIXEL_UTIL.append_tag("head",e,"script")},onead_pixel_core.send=function(e,t){var a=new Image;a.width=a.height=0;t=ONEAD_PIXEL_UTIL.to_param({host:ONEAD_PIXEL_API.host,event:ONEAD_PIXEL_CONST.event_type_normal,dt:(new Date).getTime()||"",p1:this.pub.params.uid||"",p2:this.pub.params.guid||"",p3:window.location.href||"",p4:document.title||"",p5:document.referrer||"",p6:this.pub.params.ffp||"",p7:this.pub.params.cat||"",pub:this.pub.params.sessionid||"",acc:this.pub.params.accountid||"",vendor:this.pub.params.vendor||"",action:e||"",eng:t||"",enc:this.pub.params.enc||"",adid:this.pub.params.adid||"",cu1:this.pub.params.cu1||"",cu2:this.pub.params.cu2||"",cu3:this.pub.params.cu3||"",cu4:this.pub.params.cu4||"",utm_source:this.pub.params.utm_source||"",utm_medium:this.pub.params.utm_medium||"",utm_campaign:this.pub.params.utm_campaign||"",utm_term:this.pub.params.utm_term||"",utm_content:this.pub.params.utm_content||"",ssid:this.pub.params.ssid||""});try{a.src=ONEAD_PIXEL_API.host+ONEAD_PIXEL_CONST.target+t}catch(e){}},onead_pixel_core.send_GA=function(){window.dataLayer=window.dataLayer||[],dataLayer.push({user_id:this.pub.params.guid})},onead_pixel_core.check_bonuce=function(){setTimeout(function(){onead_pixel_core.is_bounce_check=!1},ONEAD_PIXEL_API.work_session_time);function e(){parent.window.document.body.addEventListener("click",function(){var e;onead_pixel_core.is_bounce_check&&((e={}).type=ONEAD_PIXEL_CONST.action_click,ONEAD_ENG.push(e),onead_pixel_core.get_serv(),onead_pixel_core.is_bounce_check=!1)}),parent.window.document.body.addEventListener("touchend",function(){var e;onead_pixel_core.is_bounce_check&&((e={}).type=ONEAD_PIXEL_CONST.action_touch,ONEAD_ENG.push(e),onead_pixel_core.get_serv(),onead_pixel_core.is_bounce_check=!1)}),parent.window.addEventListener("scroll",function(){var e;onead_pixel_core.is_bounce_check&&((e={}).type=ONEAD_PIXEL_CONST.action_scroll,ONEAD_ENG.push(e),onead_pixel_core.get_serv(),onead_pixel_core.is_bounce_check=!1)})}try{if(parent&&parent.document)switch(parent.document.readyState){case"loading":case"interactive":try{window.attachEvent?parent.window.attachEvent("onload",e):parent.window.addEventListener("load",e,!1)}catch(e){}break;default:e()}}catch(e){}},onead_pixel_core.tracker=function(e){var t;ONEAD_ENG.push(e),e.value&&"object"==typeof e.value?e.value.name?(t=e.value.name,RegExp(/[(\ )(\~)(\!)(\@)(\#)(\$)(\%)(\^)(\&)(\*)(\()(\))(\-)(\+)(\=)(\[)(\])(\{)(\}) (\|) (\\) (\;) (\:) (\')(\")(\,)(\.)(\/)(\?)(\)]+/).test(t)?window.console.error("name 不能有特殊字元"):(e=e.value.name,/^[\u4E00-\u9FA5]+$/.test(e)?window.console.error("name 不能有中文字"):this.get_serv())):window.console.error("name 為必填"):window.console.error("window.onead_pixel.push value must obj")};var ONEAD_PIXEL_UTIL={to_param:function(e){var t=[];if(void 0===e.length)for(var a in e)if(e[a].constructor===Array)for(var i=0;i<e[a].length;i++){var o=e[a][i],n=o;isNaN(n)&&(n=encodeURIComponent(o)),t[t.length]=encodeURIComponent(a+"[]")+"="+n}else t[t.length]=encodeURIComponent(a)+"="+encodeURIComponent(e[a]),ONEAD_PIXEL_API.debug;return t.join("&").replace(/%20/g,"+")},append_tag:function(e,t,a){a=document.createElement(a);a.type="text/javascript",a.src=t,a.async=!0,a.onload=function(e){};e=document.getElementsByTagName(e)[0];e&&e.appendChild(a)},prepare_frame:function(e,t){var a=document.createElement("iframe");a.setAttribute("src",e),a.style.width="0px",a.style.height="0px",a.style.display="none",document.body.appendChild(a)},is_android_webview:function(){var e=/android/i.test(navigator.userAgent),t=/\[FB_IAB/.test(navigator.userAgent),a=0<=navigator.userAgent.indexOf("Line");return!0===e&&(!0===t||!0==a)},is_ios:function(){var e=-1<navigator.userAgent.toLowerCase().indexOf("iphone"),t=-1<navigator.userAgent.toLowerCase().indexOf("ipad"),a=-1<navigator.userAgent.toLowerCase().indexOf("ipod");return e||a||t},get_cookie:function(e){var t=function(e,t){if("string"==typeof t)for(var a,i=e+"=",o=t.split(/[;&]/),n=0;n<o.length;n++){for(a=o[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(i))return a.substring(i.length,a.length)}}(e,document.cookie);if(void 0!==t){if("_ga"===e)return t;e=decodeURIComponent(decodeURIComponent(t));if(/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){t="";try{t=JSON.parse(e)}catch(e){}if(""!==t.oid)return t}}},set_cookie:function(e,t){var a,i;void 0!==t&&(t.v=ONEAD_1ST_COOKIE.vision,i=(a=new Date).getTime(),a.setTime(i+31536e6),t=encodeURIComponent(encodeURIComponent(JSON.stringify(t))),document.cookie=e+"="+t+";samesite=none;secure;expires="+a.toGMTString()+";path=/")},replace_cookie:function(e){e=function(e,t){if("string"==typeof t)for(var a,i=e+"=",o=t.split(/[;&]/),n=0;n<o.length;n++){for(a=o[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(i))return a.substring(i.length,a.length)}}(e,document.cookie);if(void 0!==e)return!!/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(ONEAD_PIXEL_UTIL.set_cookie("oid",JSON.parse(e)),!0)},getLocationParams:function(){var e,t;return-1<location.search.indexOf("utm_source")&&(e=location.search,t=[],e.split("?")[1].split("&").map(function(e){e=e.split("=");t[e[0]]=e[1]})),t},checkIsCompatible:function(){return-1<window.navigator.userAgent.indexOf("Firefox")},create_uuid:function(){var a=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===e?t:3&t|8).toString(16)})},getSSId:function(){var e=new Date,t=e.getMilliseconds();return(100*(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())+t).toString(36)}};!function(t){if(!ONEAD_PIXEL_UTIL.checkIsCompatible()){for(var e,a=0;a<t.length;a++)"tracker"===(e=t[a]).type?(onead_pixel_core.tracker(e),t.splice(a,1),a--):"init"===e.type?onead_pixel_core.init_v2(e):(onead_pixel_core.init_v1(e),t.shift());t.push=function(e){"tracker"===e.type?e.value?(onead_pixel_core.tracker(e),t.shift()):window.console.error("type: tracker, value 必填"):"init"===e.type?onead_pixel_core.init_v2(e):onead_pixel_core.init_v1(e)}}}(onead_pixel);